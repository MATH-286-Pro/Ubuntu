# Docker

## What is Docker ğŸ‹

<details><summary>Introduction</summary>

### Advantage ä¼˜ç‚¹

    Docker æ€§èƒ½é«˜äºè™šæ‹Ÿæœºï¼Œå› ä¸ºè™šæ‹Ÿæœºä¼šè™šæ‹Ÿä¾‹å¦‚å£°å¡ã€æ˜¾ç¤ºå™¨ç­‰ç¡¬ä»¶ï¼Œä½†æ˜¯ Docker åªè™šæ‹Ÿäº† Linux å†…æ ¸å’Œæ–‡ä»¶ç³»ç»Ÿ

### Prerequsite å‰ç½®æ¡ä»¶

    To install Docker Engine, you need the 64-bit version of one of these Ubuntu versions:

    - Ubuntu Noble 24.04 (LTS)
    - Ubuntu Jammy 22.04 (LTS)
    - Ubuntu Focal 20.04 (LTS)

### Tutorial æ•™ç¨‹

- [Bilibili è§£å†³Docker ROSæ‰¾ä¸åˆ°USBè®¾å¤‡ä¸å±€åŸŸç½‘é—®é¢˜](https://www.bilibili.com/video/BV1Eu4y1D76k/?vd_source=4c878cdda4a827e2590557bcbb57b3e5)  
- [Docker Ubuntu å®˜æ–¹ç½‘ç«™](https://docs.docker.com/engine/install/ubuntu/)

### VScode æ’ä»¶

![Docker plug](..\Picture/Docker/Docker_VSCode.png)

</details>


## Install

<details><summary>Install</summary>

### 1.Set up Docker's `apt` repository

#### 1.1 Add Docker's official GPG key:

`sudo apt-get update`  
`sudo apt-get install ca-certificates curl`  
`sudo install -m 0755 -d /etc/apt/keyrings`  
`sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc`  
`sudo chmod a+r /etc/apt/keyrings/docker.asc`    

#### 1.2 Add the repository to Apt sources:

echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null  
`sudo apt-get update`  

### 2.Install the Docker packages

`sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin`

### 3.Verify that the Docker installation is sccuessful

`sudo docker run hello-world`

![Docker Hello World](..\Picture/Docker/Docker_helloworld.png)

</details>


## Operation

| æ“ä½œ            | å‘½ä»¤                                                            | è¯´æ˜                                            |
| --------------- | --------------------------------------------------------------- | ----------------------------------------------- |
| æŸ¥çœ‹æ‰€æœ‰å®¹å™¨    | `sudo docker ps -a`                                                  | åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬æ­£åœ¨è¿è¡Œå’Œå·²åœæ­¢çš„å®¹å™¨        |
| **æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨** | `sudo docker ps`                                                      | åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨                          |
| å¯åŠ¨å®¹å™¨        | `docker start <container_id_or_name>`                           | å¯åŠ¨ä¸€ä¸ªå·²åœæ­¢çš„å®¹å™¨                            |
| åœæ­¢å®¹å™¨        | `docker stop <container_id_or_name>`                            | åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨                          |
| åˆ é™¤å®¹å™¨        | `docker rm <container_id_or_name>`                              | åˆ é™¤ä¸€ä¸ªå·²åœæ­¢çš„å®¹å™¨                            |
| **è¿›å…¥å®¹å™¨**        | `docker exec -it <container_id_or_name> /bin/bash`              | ä»¥äº¤äº’æ–¹å¼è¿›å…¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨                |
| **é€€å‡ºå®¹å™¨**        | `exit` or `Ctrl+D`                                              | é€€å‡ºå½“å‰å®¹å™¨çš„äº¤äº’å¼ç»ˆç«¯                        |
| æ–­å¼€å®¹å™¨ä½†ä¸åœæ­¢ | `Ctrl+P` then `Ctrl+Q`                                          | æ–­å¼€å®¹å™¨çš„ç»ˆç«¯ä¼šè¯ï¼Œä½†å®¹å™¨ç»§ç»­è¿è¡Œ              |
| æŸ¥çœ‹å®¹å™¨æ—¥å¿—    | `docker logs <container_id_or_name>`                            | æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—è¾“å‡º                              |
| æ£€æŸ¥å®¹å™¨è¯¦ç»†ä¿¡æ¯| `docker inspect <container_id_or_name>`                         | æ˜¾ç¤ºå®¹å™¨çš„è¯¦ç»†é…ç½®ä¿¡æ¯                          |
| æŸ¥çœ‹æ‰€æœ‰é•œåƒ    | `docker images`                                                 | åˆ—å‡ºæ‰€æœ‰å·²ä¸‹è½½çš„é•œåƒ                            |
| åˆ é™¤é•œåƒ        | `docker rmi <image_id_or_name>`                                 | åˆ é™¤ä¸€ä¸ªé•œåƒ                                    |
| æ‹‰å–é•œåƒ        | `docker pull <image_name>`                                      | ä» Docker ä»“åº“ä¸­æ‹‰å–ä¸€ä¸ªé•œåƒ                    |
| è¿è¡Œé•œåƒ        | `docker run -it <image_name> /bin/bash`                         | è¿è¡Œä¸€ä¸ªé•œåƒå¹¶è¿›å…¥å…¶äº¤äº’å¼ç»ˆç«¯                  |


## Example
- **åœ¨ Docker ä¸­å®‰è£… Ubuntu 22.04**
  - sudo docker pull ubuntu:22.04 (æ‹‰å– ubuntu22.04 é•œåƒ)
  - docker run --name Ubuntu-22-04 -dit ubuntu:22.04 /bin/bash (åˆ›å»ºå¹¶è¿è¡Œ Ubuntu-22-04)
  - docker exec -it Ubuntu-22-04 /bin/bash
  - apt update (ä¸éœ€è¦ä½¿ç”¨ sudo)
- **åœ¨ Docker Ubuntu 22.04 ä¸­ å®‰è£… ROS2 Humble**
  - apt install locales
  - locale-gen en_US en_US.UTF-8
  - update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8
  - export LANG=en_US.UTF-8
  - apt-cache policy | grep universe (æ£€æŸ¥æ˜¯å¦å¯ç”¨ Universe æº)

  - apt update && apt install curl gnupg lsb-release -y
  - curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg

  - echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(source /etc/os-release && echo $UBUNTU_CODENAME) main" | tee /etc/apt/sources.list.d/ros2.list > /dev/null

  - apt update && apt upgrade -y && apt install ros-humble-desktop -y

  - source /opt/ros/humble/setup.bash
  - echo " source /opt/ros/humble/setup.bash" >> ~/.bashrc 

  - ros2 run demo_nodes_cpp talker
  - ros2 run demo_nodes_py listener

  - apt install git -y
  - apt install python3-rosdep -y
  - sudo apt rosdep init (åˆå§‹åŒ– rosdep)
  - rosdep update




