# Isaac Gym

## 1.ä»‹ç» Introduction
Isaac Gym æ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨ GPU è¿›è¡Œå¼ºåŒ–å­¦ä¹ è®­ç»ƒçš„ä»¿çœŸç¯å¢ƒï¼Œå¿…è¦æ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨ CPUã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„å¼ºåŒ–å­¦ä¹ ä»¿çœŸç¯å¢ƒï¼š
- **OpenAI Gym**
- **Pybullet Gym**
- **Gazebo**
- **Unreal/Unity**
  - **AirSim**
  - **Unity Machine Learning Agents**

### Isaac Gym ç¯å¢ƒä»‹ç»
- **ç¯å¢ƒæ„å»º**: PhysX
- **è®­ç»ƒç®—æ³•**: å¤šç§å¼ºåŒ–å­¦ä¹ ç®—æ³•
- **ç¯å¢ƒä¸ç®—æ³•äº¤äº’**: é«˜æ•ˆçš„ç¯å¢ƒä¸ç®—æ³•äº¤äº’æœºåˆ¶


<!-- ## 2.å®‰è£… Installation
### å®‰è£…
1. å®‰è£… CUDA
2. å®‰è£… Nvidia Driver é©±åŠ¨
3. å®‰è£… Isaac Gym

### æµ‹è¯•
1. è¿›å…¥ Isaac Gym æ–‡ä»¶å¤¹
    ```bash
    cd /home/jhu/Downloads/isaacgym/python
    ```
2. åˆ›å»º Conda ç¯å¢ƒå¹¶æ¿€æ´»
    ```bash
    bash ../create_conda_env_rlgpu.sh [åˆ›å»ºåä¸ºrlgpuçš„ç¯å¢ƒ]
    conda activate rlgpu [æ¿€æ´»åä¸ºrlgpuçš„ç¯å¢ƒ]
    ```
3. è¿è¡Œç¤ºä¾‹
    ```bash
    cd examples
    conda activate rlgpu
    python joint_monkey.py
    python 1080_balls_of_solitude.py
    ```

æ³¨æ„: å¯åŠ¨ example æ—¶å‡ºç° Forcing CPU pipeline æ˜¯æ­£å¸¸çš„  

<img src="../Picture/Isaac Gym/Example.png" alt="Example" width="800"/>

## 3.å­¦ä¹ 

### Legged Gym

#### Introduction
Legged Gym ç”± ETH RSL å®éªŒå®¤å¼€å‘ã€‚

- **[Github å®˜æ–¹é“¾æ¥ğŸ”— ä¸»è¦å‚è€ƒ](https://github.com/leggedrobotics/legged_gym)**
- **[çŸ¥ä¹ é“¾æ¥ğŸ”—](https://zhuanlan.zhihu.com/p/560826876)**


conda ä¸ pyenv éƒ½å¯ä»¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒç”¨äºæ§åˆ¶ python ç‰ˆæœ¬

bash ../create_conda_env_rlgpu.sh
conda activate rlgpu [å¯åŠ¨åä¸ºrlgpuç¯å¢ƒ-python-3.7.12]

pyenv virtualenv 3.8.12 isaacgym-env
pyenv activate isaacgym-env -->




## 2.å®‰è£… Legged Gym æ­¥éª¤ [å‚è€ƒæ•™ç¨‹](https://blog.zzshub.cn/2024/06/21/DRL_LeggedgymInstall/index.html)

1. å®‰è£… Nvidia æ˜¾å¡é©±åŠ¨
   1. sudo ubuntu-drivers autoinstall (è‡ªåŠ¨åŒ¹é…æ˜¾å¡å®‰è£…é©±åŠ¨)
   2. nvidia-smi (æ£€æŸ¥é©±åŠ¨æ˜¯å¦å®‰è£…æˆåŠŸ)

2. å®‰è£… Nvidia CUDAé©±åŠ¨
   1. uname -m (æŸ¥çœ‹Ubuntuæ¶æ„ç±»å‹)
   2. [ä¸‹è½½ç½‘ç«™](https://developer.nvidia.com/cuda-downloads?target_os=Linux&target_arch=x86_64&Distribution=Ubuntu&target_version=22.04&target_type=deb_local)
   3. /usr/local/cuda/bin/nvcc --version (æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ)
   - Architecture = x86_64
   - Distribution = Ubuntu
   - Version = 22.04
   - Installer Type = deb(Network)

3. å®‰è£… Conda ç”¨äºè™šæ‹Ÿç¯å¢ƒåˆ›å»º
   - mkdir -p ~/miniconda3
   - wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh
   - bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
   - rm ~/miniconda3/miniconda.sh
   - ~/miniconda3/bin/conda init bash
   - ~/miniconda3/bin/conda init zsh

4. åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£… Pytorch
   - nvidia-smi (æŸ¥çœ‹è‡ªå·±çš„ CUDA ç‰ˆæœ¬ä¸º 12.4)
   - conda activate legged-gym (å¯åŠ¨è™šæ‹Ÿç¯å¢ƒ)
   - [é€‰æ‹© Conda ç‰ˆæœ¬çš„å®‰è£…](https://blog.zzshub.cn/2024/06/21/DRL_LeggedgymInstall/index.html)
   - å®‰è£… Pytorch
   - è¿˜æ˜¯åœ¨ legged-gym è™šæ‹Ÿç¯å¢ƒè¾“å…¥ 
     - python
     - import pytorch
     - print(torch.cuda.is_available())
   - è‹¥è¾“å‡ºä¸º True åˆ™å®‰è£…æˆåŠŸ

5. ä¿®æ”¹ Isaac Gym
   - æ‰¾åˆ° ./python/isaacgym/torch_utils.py
   - å°†ç¬¬135è¡Œçš„np.floatä¿®æ”¹ä¸ºfloat

6. å®‰è£… Isaac Gym
   - cd Document/Robot/isaac gym/python
   - pip install -e .

7. è¿è¡Œ Isaac Gym
   - cd Document/Robot/isaac gym/python/examples
   - python joint_monkey.py
   - å‡ºç°æŠ¥é”™ï¼šæ‰¾ä¸åˆ° libpython3.8.so.1.0
   - è¯¥æŠ¥é”™å¯èƒ½æ˜¯å› ä¸º æ²¡æœ‰æ­£ç¡®æ·»åŠ ç¯å¢ƒå˜é‡å¯¼è‡´çš„
   - **sudo find / -name libpython3.8.so.1.0**
   - **export LD_LIBRARY_PATH=/home/math-286-dell/miniconda3/envs/legged-gym/lib:$LD_LIBRARY_PATH**

8. å®‰è£… rsl_rl
   - cd Document/Robot
   - git clone https://github.com/leggedrobotics/rsl_rl
   - cd rsl_rl && git checkout v1.0.2 && pip install -e .

9.  å®‰è£… legged-gym
    - cd Document/Robot
    - git clone https://github.com/leggedrobotics/legged_gym.git
    - cd legged_gym && pip install -e .

10. æµ‹è¯• legged-gym
    - ä½¿ç”¨python legged_gym/scripts/train.py --task=anymal_c_flatå‘½ä»¤æ¥æµ‹è¯•ç¯å¢ƒæ˜¯å¦èƒ½æ­£å¸¸è®­ç»ƒ
    - ä½¿ç”¨python legged_gym/scripts/play.py --task=anymal_c_flatå‘½ä»¤æ¥æµ‹è¯•æ‚¨åˆšæ‰è®­ç»ƒå‡ºçš„ç­–ç•¥
    - **æŠ¥é”™ç¼ºå°‘ tensorboard**
    - **pip install tensorboard**


## 3.å®‰è£…å°å·¥å…· 
- å®æ—¶æŸ¥çœ‹GPUå ç”¨æƒ…å†µ [å‚è€ƒç½‘å€](https://blog.csdn.net/weixin_44120025/article/details/118978198)
  - pip instal gpustat (å®‰è£…)
  - gpustat (å¯åŠ¨)
  - watch -n 1 gpustat (æ¯éš”1ç§’æŸ¥çœ‹gpu)

